@page
@model MvLAuthServer2.Pages.Admin.Users.IndexModel
@using MvLAuthServer2
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_PaginatedIndex";
}

<h1>All Users</h1>

<form method="post">
    <table class="table" border="1" cellpadding="5">
        <thead>
            <tr>
                <th>UserId</th>
                <th>Times Connected</th>
                <th>First Played</th>
                <th>Last Seen</th>
                <th>Nickname History</th>
                <th>IP History</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @if (Model.UserEntries != null) {
                foreach (var userEntry in Model.UserEntries) {
                    <tr>
                        <td>@userEntry.UserId</td>
                        <td>@userEntry.TimesConnected</td>
                        <td>@userEntry.FirstPlayed</td>
                        <td>@userEntry.LastSeen</td>
                        <td>@string.Join(", ", userEntry.AllNicknames.Select(nl => nl.Nickname))</td>
                        <td>@string.Join(", ", userEntry.AllIps.Select(il => Utils.NumberToIp(il.IPAddress)))</td>
                        <td>
                            <!-- <snippet_Edit> -->
                            <a asp-page="Edit" asp-route-id="@userEntry.Id">Edit</a> |
                            <!-- </snippet_Edit> -->
                            <!-- <snippet_Delete> -->
                            <button type="submit" asp-page-handler="delete" asp-route-id="@userEntry.Id" onclick="return confirm('Are you sure?')">delete</button>
                            <!-- </snippet_Delete> -->
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</form>
