@page
@using MvLAuthServer2
@model MvLAuthServer2.Pages.Admin.Bans.IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<h1>All Bans</h1>

<form method="post">
    <table class="table" border="1" cellpadding="5">
        <thead>
            <tr>
                <th>ID</th>
                <th>UserId</th>
                <th>IP Address Range</th>
                <th>Reason</th>
                <th>Created</th>
                <th>Expiration</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Bans != null) {
                foreach (var ban in Model.Bans) {
                    <tr>
                        <td>@ban.Id</td>
                        <td>@ban.UserId</td>
                        <td>@ban.IpRangeString()</td>
                        <td>@ban.Message</td>
                        <td>@DateTimeOffset.FromUnixTimeSeconds(ban.Created).ToLocalTime()</td>
                        @if (ban.Expiration.HasValue) {
                            <td>@Utils.FormatTimeSpan(DateTimeOffset.FromUnixTimeSeconds(ban.Expiration.Value).ToLocalTime() - DateTime.Now)</td>
                        } else {
                            <td>None.</td>
                        }
                        <td>
                            <!-- <snippet_Edit> -->
                            <a asp-page="Edit" asp-route-id="@ban.Id">Edit</a> |
                            <!-- </snippet_Edit> -->
                            <!-- <snippet_Delete> -->
                            <button type="submit" asp-page-handler="delete" asp-route-id="@ban.Id" onclick="return confirm('Are you sure?')">delete</button>
                            <!-- </snippet_Delete> -->
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
    <a asp-page="Create">Create New</a>
</form>